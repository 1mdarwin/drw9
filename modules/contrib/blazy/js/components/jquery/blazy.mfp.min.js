!function(p,u,m){"use strict";var a,o,l,h=jQuery,i="mfp",t="b-"+i,r="["+(i="data-"+i)+"-gallery]",c="["+i+"-trigger]",s="is-mfp-mounted",f=u.blazy||{},d=m;function e(i){var e,f,d,n=p.findAll(i,c),t=(f=[],d=(e=n).length,p.each(e,function(i,e){var n,t=p.parse(p.attr(i,"data-media")),a=i.nextElementSibling,o=p.attr(i,"href"),l={el:h(i)},m=l.boxType=t.boxType,r="",c=t.width,s=!1;"image"===m?(n=o,l.type="image"):("html"in t?(s="video"===m,n=t.html,l.type="inline"):"iframe"===m&&(s=!0,n=u.theme("blazyMedia",{el:i}),l.type="inline"),n&&(c&&s&&(r=' style="width:'+c+'px;"'),n='<div class="mfp-html mfp-html--'+m+'"'+r+'><div class="mfp-inner">'+n,a&&(n+='<div class="mfp-bottom-bar"><div class="mfp-title">'+a.innerHTML+'</div><div class="mfp-counter">'+(e+1)+"/"+d+"</div></div>"),n+="</div></div>")),n&&(l.src=n),a&&(l.title=a.innerHTML),f.push(l)}),f);p(i).magnificPopup({items:t,gallery:{enabled:1<n.length,navigateByImgClick:!0,tCounter:"%curr%/%total%"},preloader:!0,callbacks:{beforeClose:function(){var i=this.currItem;i&&i.inlineElement&&v(i.inlineElement[0])},change:function(){g(this,!0)},open:function(){var i=this.wrap;i&&i.length&&setTimeout(function(){p.addClass(i[0],"mfp-on")},100)}},mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(i){return g(this),h(a||i.data.el)}}}),p.on(i,"click",c,function(i){i=a=i.target;o=p.index(i,[".box",".grid",".field__item","li",".slide"]),setTimeout(function(){(l=p.magnificPopup.instance)&&l.goTo(o)})},!1),p.addClass(i,s)}function g(i,e){var n,t,a,o,l=i.content;return l&&l.length&&(t=l[0],a=p.find(t,"img"),(o=p.isElm(a))||(l=p.find(t,"video"),!p.isElm(l)||(l=p.attr(l,"poster"))&&((a=m.createElement("img")).decoding="async",a.src=l)),(o=p.isElm(a))&&(n=i.currItem.img=h(a),i.currItem.hasSize=o),e&&p.hasClass(t,"media media-wrapper mfp-html")&&v(t,!0)),n}function v(i,e){var n=p.hasClass(i,"media")?i:p.find(i,".media");p.isElm(n)&&(u.detachBehaviors(n),e&&setTimeout(function(){u.attachBehaviors(n),f&&f.load(n)}))}u.behaviors.blazyMagnificPopup={attach:function(i){var n;d=p.context(i),h&&p.isFun(h.fn.magnificPopup)&&!p.isFun(p.fn.magnificPopup)&&(n=h.fn.magnificPopup,p.fn.magnificPopup=function(i){var e=p(n.apply(this,arguments));return p.isUnd(p.magnificPopup)&&(p.magnificPopup=h.magnificPopup),e}),p.once(e,t,r+":not(."+s+")",d)},detach:function(i,e,n){"unload"===n&&p.once.removeSafely(t,r,d)}}}(dBlazy,Drupal,this.document);
