!function(f,b,v){"use strict";var C,y,p,g,x="blazybox",t=x,z="iframe",s="is-bbox",a="."+x,o=a+":not(."+s+")",B=a+"__content",_="media__element",n=a+"__close",w="is-"+x+"--open",$=s+"--fh",T=s+"--fs",D="b-provider--",k="visually-hidden",E="aria-hidden",i="[data-blazybox-trigger]",A=f.sanitizer,M=f.multimedia||!1,S={};function l(e){var a=b.blazyBox;e.preventDefault(),e.stopPropagation();e=e.target,e=e.href?e:f.closest(e,i);a.open(e)}function d(e){var a=b.blazyBox,i=f(e);a.el=e,a.$el=i,a.btnClose=i.find(n),i.on("click."+x,n,a.close,!0),i.addClass(s)}function r(e){f.on(e,"click."+x,l)}b.blazyBox={btnClose:null,el:null,$el:null,options:{hideCloseBtn:!1},open:function(e,a){var i,t=b.blazyBox,s=v.body,o=t.$el,n=function(e){var a=e;f.isObj(e)&&(a=e.el||e.element);return f.isElm(a)?a:null}(e),l=f.isElm(n)?f.parse(f.attr(n,"data-b-media data-media")):{},d=l.provider,r=l.irrational,c=l.token,u=o.find(B),h=f.windowSize(),m=a||{},e=S[c];f.isUnd(m.fs)&&(m.fs=!0,m.width=h.width,m.height=h.height),e||(e=b.theme("blazyBoxMedia",{el:n,dataset:l,options:m}),l={ADD_TAGS:[z],ADD_ATTR:["allow","allowfullscreen"]},e=A.sanitize(e,l),S[c]=e),o.removeClass(k).attr(E,!1),m.fs&&o.addClass(T),o.removeClass(D+C),d&&o.addClass(D+d),u.innerHTML=e,a?(t.options=f.extend({},t.options,a),a=t.options,y=a.class||"",p=a.bodyClass||"",g=a.bodyClosingClass||"",y&&o.addClass(y),p&&f.removeClass(s,p),setTimeout(function(){p&&f.addClass(s,p)},301)):f.addClass(s,w),M&&M.pause(),o.removeClass($),r&&o.addClass($),o=f.find(u,".media"),f.isElm(o)&&b.attachBehaviors(o),setTimeout(function(){i=f.find(u,z),f.isElm(i)&&f.addClass(i,_)},101),t.check(),m.provider=d,f.trigger(x+":opened",[t,n,m]),C=d},close:function(e){var a=b.blazyBox,i=v.body,t=a.$el;f.isUnd(e)||e.preventDefault();function s(){t.addClass(k).attr(E,!0).find(B).innerHTML=""}var o=!1,n=function(){g&&f.removeClass(i,g),y&&(t.removeClass(y),s()),t.off("transitionend",n),o=!0};f.removeClass(i,w),t.removeClass(T),p&&f.removeClass(i,p),g?f.addClass(i,g):s(),t.on("transitionend",n),setTimeout(function(){!o&&t.hasClass(y)&&n()},1200),b.detachBehaviors(t[0]),f.trigger(x+":closed",[a])},check:function(){var e;this.options.hideCloseBtn&&(e=this.btnClose||this.$el.find(n),f.addClass(e,k))},attach:function(){var e=f.find(v.body,a);f.isElm(e)||f.append(v.body,b.theme("blazyBox"))},isOpened:function(){return!b.blazyBox.$el.hasClass(k)}},b.theme.blazyBox=function(){return f.template('<div class="$id visually-hidden" tabindex="-1" role="dialog" aria-hidden="true" aria-label="$id"><div class="$id__content"></div><button class="$id__close" data-role="none">&times;</button></div>',{id:x})},b.theme.blazyBoxMedia=function(e){var a=e.el,i=e.dataset||{},t=e.options||{},s=t.fs,o=f.attr(a,"data-oembed-url"),n=i.html,l=!0,e="";return n?(l=!1,i.encoded&&(n=atob(n)),e+=n):"image"===i.boxType&&(s=!0,t.width=i.width,t.height=i.height,n=f.image.alt(a,""),i=a.href,i=f.attr(a,"data-box-url",i,!0),e+='<img class="'+_+'" src="'+i+'" decoding="async" loading="eager" alt="'+n+'" />'),o&&!A.isDangerous("src",o)&&(e+='<iframe class="'+_+'" src="'+o+'" width="100%" height="100%" allowfullscreen></iframe>'),s&&t.width&&l&&(e='<div class="media media--ratio media--ratio--fluid" style="'+("padding-bottom: "+f.image.ratio(t)+"%; width:"+t.width+"px;")+'">'+e+"</div>"),'<div class="'+x+'__media">'+e+"</div>"},b.behaviors.blazyBox={attach:function(e){f.ready(function(){b.blazyBox.attach(),f.once(d,t,o,e),f.once(r,"blzybx",i,e)})},detach:function(e,a,i){"unload"===i&&f.once.removeSafely(t,o,e)}}}(dBlazy,Drupal,this.document);
